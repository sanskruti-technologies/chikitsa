ALTER TABLE %dbprefix%language_data ADD UNIQUE( l_name, l_index);
UPDATE %dbprefix%version SET current_version='0.7.9';
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'System Administrator', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'System Administrator');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Administrator', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Administrator') AND navigation_menu.menu_name NOT IN ('rebrand');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Doctor', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Doctor') AND navigation_menu.menu_name IN ('patient_report','appointment_report','bill_report','tax_report','new_patient','payment','payments', 'bill','issue_refund','appointment report','reports','appointments','new_inquiry','all_patients','patients','bill report','pending_payments');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Nurse', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Nurse') AND navigation_menu.menu_name IN ('patient_report','appointment_report', 'bill_report', 'tax_report', 'new_patient','payment', 'payments', 'bill', 'issue_refund', 'patients', 'all_patients','new_inquiry', 'appointments', 'appointment report','reports');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Receptionist', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Receptionist') AND navigation_menu.menu_name IN ('new_patient',  'payment',  'payments', 'bill',  'issue_refund',  'pending_payments','appointments','new_inquiry','all_patients','patients');