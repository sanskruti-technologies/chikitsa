CREATE TABLE %dbprefix%nurse ( nurse_id INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY , contact_id INT(11) NOT NULL , joining_date DATE NOT NULL , department_id VARCHAR(25) NOT NULL , userid VARCHAR(16) NOT NULL , is_deleted INT(11) NOT NULL , sync_status INT(11) NOT NULL , gender VARCHAR(10) NOT NULL );
CREATE TABLE %dbprefix%language_data ( id INT(11) NOT NULL AUTO_INCREMENT , l_name VARCHAR(25) NOT NULL , l_index VARCHAR(150) NOT NULL , l_value VARCHAR(250) NOT NULL , PRIMARY KEY (id));
UPDATE %dbprefix%version SET current_version='0.7.8';
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'System Administrator', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'System Administrator');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Administrator', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Administrator') AND navigation_menu.menu_name IN ('patient_report','appointment_report', 'bill_report','tax_report', 'new_patient', 'payment', 'payments', 'bill', 'issue_refund', 'patients','all_patients','new_inquiry','appointments', 'appointment report','reports','administration', 'clinic detail',  'working_days', 'all_users',  'users', 'setting', 'backup', 'payment_methods','tax_rates','reference_by', 'modules');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Doctor', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Doctor') AND navigation_menu.menu_name IN ('patient_report','appointment_report','bill_report','tax_report','new_patient','payment','payments', 'bill','issue_refund');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Nurse', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Nurse') AND navigation_menu.menu_name IN ('patient_report','appointment_report', 'bill_report', 'tax_report', 'new_patient','payment', 'payments', 'bill', 'issue_refund', 'patients', 'all_patients','new_inquiry', 'appointments', 'appointment report','reports');
INSERT INTO %dbprefix%menu_access (menu_name, category_name, allow) SELECT navigation_menu.menu_name,'Receptionist', '1' FROM %dbprefix%navigation_menu AS navigation_menu WHERE navigation_menu.menu_name NOT IN (SELECT menu_name FROM %dbprefix%menu_access WHERE category_name = 'Receptionist') AND navigation_menu.menu_name IN ('new_patient',  'payment',  'payments', 'bill',  'issue_refund',  'pending_payments');